# お気に入りリスト情報の計測

``track:favorite``メソッドをカスタマイズタグとして追加することで、お気に入りリストに入っている商品情報を「CODE Marketing Cloud」に連携することが可能です。

## ``track:favorite``メソッドについて

code.js 内でお気に入りリスト情報を収集するイベントを発生させるためのメソッドです。

## ``track:favorite``メソッドの設置が必要なケース

以下のケースで、``track:favorite``メソッドの設置が必須となります。

- お気に入りリスト情報を活用する動的クリエイティブテンプレートを利用して接客を行いたい

## ``track:favorite``メソッドの設置方法

``track:favorite``メソッドタグの設置場所や内容は、サイト側の実装に大きく依存します。以下に記載した``track:favorite``メソッドタグの設置場所やサンプルコードを参考に、サイトに合わせた記述に書き換えてください。


### ``track:favorite``メソッドの設置場所

- code.js の初期化時にお気に入りリスト情報を活用するため、基本的には``load``メソッドの前に``track:favorite``メソッドタグを設置してください。
- Ajaxなど非同期通信によりお気に入りリストに対する商品追加／削除等が実施される場合は、更新が実施されるごとに``track:favorite``メソッドを呼び出すことをおすすめします。

### ``track:favorite``メソッドのサンプルコード

#### お気に入りリストに商品が追加されている場合

追加／削除／クリア等の情報を送信するのでなく、その時点でお気に入りリストに入っている全商品情報を都度送信するようにしてください。

```
_cc('track', 'favorite', {
    status: true,
    items: [{
        itemId: '001',
        name: 'テスト商品1',
        category: 'テストカテゴリ',
        price: 1000
    }, {
        itemId: '002',
        name: 'テスト商品2',
        category: 'テストカテゴリ',
        price: 980
    }, {
        itemId: '003',
        name: 'テスト商品3',
        category: 'テストカテゴリ',
        price: 1980
    }]
});
```

#### 例：お気に入りリストが空の場合

```
_cc('track', 'favorite', {
    status: false
});
```

### ``track:favorite``メソッドの第三引数に利用できるプロパティ

| プロパティ名 | 必須 | 概要 | 例 | 型 |
|:--------:|:--------:|:--------:|:--------:|:--------:|
| status | ○ | お気に入りリストへの商品含有ステータス | true | BOOLEAN(true/false) |
| category | × | お気に入りリストの種別 | "shopA" | 文字列 |
| items | × | 商品情報一覧 | items | itemフォーマットのオブジェクトの配列 |

- itemフォーマットの詳細については[閲覧アイテム情報の計測](./track-item.html)ページをご覧ください。
- category属性は、1サイト内にお気に入りリストを複数用意している／用意したい場合に使用します。
