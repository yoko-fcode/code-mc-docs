# 会員情報の計測

``track:user``メソッドをカスタマイズタグとして追加することで、サイト上のユーザー属性情報を「CODE Marketing Cloud」に連携することが可能です。

## ``track:user``メソッドについて

code.js 内でユーザー属性情報を収集するイベントを発生させるためのメソッドです。

## ``track:user``メソッドの設置が必要なケース

以下のケースで、``track:user``メソッドの設置が必須となります。

- ユーザー属性情報を活用する動的クリエイティブテンプレートを利用して接客を行いたい

## ``track:user``メソッドの設置方法

``track:user``メソッドの設置場所や内容は、サイト側の実装に大きく依存します。以下に記載した``track:user``メソッドの設置場所やサンプルコードを参考に、サイトに合わせた記述に書き換えてください。

### ``track:user``メソッドの設置場所

ログイン機能のあるサイトで会員情報を「CODE Marketing Cloud」に連携する場合は、その情報を取得できるページに``track:user``メソッドを設置してください。

### ``track:user``メソッドのサンプルコード

#### 例：ユーザー情報を送信する

```
_cc('track', 'user', {
  userId: "XXX123",
  age: 20,
  rank: "gold"
});
```

#### ログイン情報を送信する

```
_cc('track', 'user', {
  userId: "XXX123",
  login: true
});
```

#### ログアウト情報を送信する

```
_cc('track', 'user', {
  login: false
});
```

### ``track:user``メソッドの第三引数に利用できるプロパティ

第三引数に指定することで、下記の属性情報を収集することが可能です。

| プロパティ名 | 概要 | 例 | 型 |
|:--------:|:--------:|:--------:|:--------:|
| userId | ユーザーID |  | |
| name | ユーザーの氏名 | "山田太郎" | 文字列 |
| email | メールアドレス | "yamada@codemarketing.cloud" | 文字列 |
| login | ログイン状態 | true | BOOL |
| subscription | メールマガジン登録の可否 | true | BOOL |
| createDate | 会員登録日 | "2006-03-15" | 文字列(ハイフン区切り) |
| age | 年齢 | 32 | 数値 |
| gender | 性別 | "M", "female", "女性", "0" | 文字列 |
| photo | 写真URL | "//xxxx.com/yyyy.jpg" | 文字列 |
| birthMonth | 誕生月 | "03", "Mar" | 文字列、もしくは数値 |
| birthYear | 誕生年 | 1983 | 数値 |
| birthDate | 誕生日 | "1983-03-15" | 日付(ハイフン区切り) |
| phone | ユーザーの電話番号 | "080-0000-0000" | 文字列 |
| firstName | 名前 | "太郎" | 文字列 |
| lastName | 名字 | "山田" | 文字列 |
| country | 国名 | "Japan", "日本", "JP" | 文字列 |
| pref | 都道府県 | "東京都" | 文字列 |
| zip | 郵便番号 | "000-0000" | 文字列(ハイフン区切り) |
| address | 住所 | "東京都千代田区五番町6-2" | 文字列 |
| point | サイト側の会員ポイント | 1000 | 数値 |
| rank | サイト側の会員ランク | "gold", "A" | 文字列 |
| job | 職種 | "営業", "エンジニア", "0" | 文字列 |
